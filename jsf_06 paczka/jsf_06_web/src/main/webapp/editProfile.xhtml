<ui:composition template="/templates/main-template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <f:metadata>
        <f:viewAction action="#{profileBB.loadProfile()}" />
    </f:metadata>

    <ui:define name="title">Edycja profilu</ui:define>

    <ui:define name="content">
        <h:form id="profileForm">
            <p:messages id="profileMessages" autoUpdate="true" closable="true" />
            <p:panel header="Edycja profilu użytkownika">
                <p:inputText id="email" value="#{profileBB.email}" required="true" requiredMessage="Email jest wymagany" />
                <p:inputText id="firstName" value="#{profileBB.firstName}" required="true" requiredMessage="Imię jest wymagane" />
                <p:inputText id="lastName" value="#{profileBB.lastName}" required="true" requiredMessage="Nazwisko jest wymagane" />

                <p:separator/>

                <h3>Zmiana hasła</h3>
                <p:password id="currentPassword" value="#{profileBB.currentPassword}" required="true" requiredMessage="Aktualne hasło jest wymagane" />
                <p:password id="newPassword" value="#{profileBB.newPassword}" placeholder="Nowe hasło (opcjonalnie)" />
                <p:password id="confirmNewPassword" value="#{profileBB.confirmNewPassword}" placeholder="Potwierdź nowe hasło" />

                <p:commandButton value="Zapisz zmiany" action="#{profileBB.saveProfile}" update="profileMessages" styleClass="ui-button" />
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
